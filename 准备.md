## 一、环境安装

1. 编辑器：vscode，需要提前安装的插件有：Chinese（汉化），Python（解析器）
2. Git && GitHub账号
3. 命令行增强工具Cmder 视频地址：

## 二、Git的使用

1. 查看有没有安装git：cmd中输入 git --version

2. git全局设置：git config --global user.name "Bruce"

   git config --global user.email "[XXX@qq.com](mailto:XXX@qq.com)"

3. 初始化本地仓库 git init

4. 新建 .gitignore文件

   ```
   *.pyc
   *~
   __pycache__
   .vscode
   ```

5. 删除已经上传的文件夹：

   git rm -r --cached day1\watchlist\env

   git commit -m "删除env"

   git push

#### 本地仓库和远程仓库关联

1. 检查是否已经创建了SSH密钥 cat ~/.ssh/id_rsa.pub
2. 如果上一步显示“No such file or directory”，这说明之前你没有生成过这个ssh密钥，需要先生成，使用ssh-keygen，不管提示任何东西，一路enter。
3. id_rsa 是私钥，一定不能泄露出去。id_rsa.pub是公钥，用于身份认证
4. 指定远程仓库地址 git remote add origin [git@github.com](mailto:git@github.com):ITClubOfBruce/flaskweb.git

## 三、安装虚拟环境

1. pip+virtualenv+requirements.txt
2. python3自带的venv模块
3. Pipenv模块

#### 本节课采用第二种

python -m venv "虚拟环境名称"

激活虚拟环境 windows上 : env\Scripts\activate Mac上: . env/bin/activate

widnows上vscode的终端中激活：. env\\Scrpits\\activate

#### 第一次提交

git status 查看flaskweb文件夹下有哪些文件发生了变化

git add . 追踪变化的文件

git commit -m "第一次提交，项目初始化完成" 提交到本地仓库

git push -u origin master "-u"参数会将推送到目标仓库和默认分支

#### 运行本地开发服务器

```
from flask import Flask

app = Flask(__name__)

@app.route('/')
def index():
    return "<h1>Hello Flask </h1>"
```

flask run

```
* Environment: production  //默认启动的时候是生产环境  
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off  //调试模式，开发阶段一定要是on的状态
 * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
127.0.0.1 - - [02/Apr/2020 08:24:04] "GET / HTTP/1.1" 200 -
```

## 四、 管理环境变量

现在需要将production（生产环境）换成 development（开发环境）

我们在去启动Flask项目的时候，要跟两个环境变量打交道：FLASK_APP和FLASK_ENV

我们的程序名字是app.py，所以暂时不需要去设置FLASK_APP；

FLASK_APP

FLASK_ENV：用来设置程序运行的环境，默认production，在开发时候，我们需要启动调试模式debug mode，调试模式需要通过将系统环境变量FLASK_ENV设置为development来启动。调试模式开启后，当程序出错，浏览器页面上会显示错误信息；代码变动后，程序会自动加载

#### 使用python-dotenv管理系统环境变量

安装 pip install python-dotenv

python-dotenv会从项目根目录的 .flaskenv和 .env文件读取环境变量并设置。我们需要创建这两个文件 touch .flaskenv .env

.flaskenv ：用来存储Flask命令行系统相关的公共环境变量 FLASK_ENV = development

.env：存储敏感数据，这个文件不能被提交到github

```
 * Environment: development
 * Debug mode: on
 * Restarting with stat
 * Debugger is active!
 * Debugger PIN: 240-556-127
 * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
```

## 五、URL

1. 多URL：一个视图函数可以绑定多个URL

   ```
   @app.route('/')
   @app.route('/index')
   @app.route('/home')
   def index():
       return "<h1>Hello Flask llaall </h1>"
   ```

2. 动态URL

   ```
   @app.route('/user/<name>')
   def index(name):
       return "<h1>Hello %s </h1>"%name
   ```

3. url_for

   修改路由

   生成URL：第一个参数是端点值，默认是视图函数的名称，静态资源默认是static